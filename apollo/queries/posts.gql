#import "~/apollo/fragments/listingPagePost.gql"

query fetchPostsAndCountByTagName (
  $tagName: String,
  $maxResults: Int = 12,
  $skip: Int = 0
) {
  allPosts(
    where: {
      tags_some: {
        name: $tagName
      }
    },
    first: $maxResults,
    skip: $skip,
    sortBy: publishTime_DESC,
  ) {
    publishTime
    ...listingPagePost
  }
  _allPostsMeta(
    where: {
      tags_some: {
        name: $tagName
      }
    },
  ) {
    count
  }
}
